# 독거노인을 위한 건강 모니터링 시스템 웹서버

<br><br><br>

## 웹 요구사항
* 사용자는 담당자, 보호자가 있다. 
* 보호자 회원가입 기능이 있다.
* 담당자는 사전에 DB에 등록이 되어있다고 가정한다.
* 담당자는 기기 등록, 상세정보 수정 및 삭제를 할 수 있다.
* 보호자는 기기 등록을 할 수 있으나 등록시 해당 기기 담당자의 승인이 필요하다.
* 담당자는 승인을 기다리는 보호자를 승인 혹은 거절처리 할 수 있다.
* 담당자와 보호자는 현재상태 메뉴를 통해 온습도, 맥박, 걸음 수, 현재 위치, 동선 등을 확인할 수 있다.
* 담당자와 보호자는 로그 메뉴를 통해 주, 월 별로 평균 온습도, 평균 걸음 수, 평균 맥박, 이상 맥박 횟수와 날짜 등을 확인할 수 있다.
* 담당자와 보호자는 대상의 동의가 있거나 전문가 필요하다고 판단한 경우 홈 카메라를 통해 집 내부를 확인할 수 있다. (문제가 된다면 기능 삭제)
* 담당자는 대상 개인정보 메뉴를 통해 대상의 이름, 연락처, 주소, 지병, 보호자 이름, 보호자 전화번호를 확인할 수 있다.
* 담당자는 대상 개인정보 메뉴에 월별로 대상에 대한 메모를 추가할 수 있다. (월 1회 방문한다고 가정)
* 보호자는 대상 개인정보 메뉴에서 이름, 지병, 담당자 이름, 담당자 전화번호를 확인할 수 있다.

* 튀는 데이터 값이 들어오는 경우 확인하고 알림을 보낸다. 웹으로는 시각적으로만 구현, 카카오톡으로 알림 메세지를 보내거나, 앱으로 알림을 띄우는 형식으로 구현
* 추가 기능 밤중에 이상 데이터가 있다면 서버에 저장해서 다음날 확인 할 수 있게.(구체적 계획 x, 2020-06-03)
<br><br><br>

## 프로젝트 계획서
| 이름 | 담당자 | 시작날짜 | 완료날짜 |
|:--------|:--------|:--------|:--------|
| 프로젝트 개요 작성 | agitd | 2020-06-03 | 2020-06-03 |
| 유스케이스 기술서 작성 | agitd | 2020-06-03 | 2020-06-03 |
| 프로젝트 계획서 작성 | agitd | 2020-06-03 | 2020-06-03 |
| UML 클래스 다이어그램 작성 | agitd | 2020-06-04 | 2020-06-04 |
| 데이터베이스 설계 | agitd | 2020-06-04 | 2020-06-04 |
| 개발환경설정 | agitd | 2020-06-05 | 2020-06-05 |

####기능별 구현 일정
| 이름 | 담당자 | 시작날짜 | 완료날짜 |
|:--------|:--------|:--------|:--------|
| 화면 설계 | agitd | 2020-06-08 | 2020-06-09 |
| 회원가입, 로그인 | agitd | 2020-06-09 | 2020-06-10 |
| 보호자 가입 승인 | agitd | 2020-06-11 | 2020-06-11 |
| 대상 기본 정보 조회 | agitd | 2020-06-11 | 2020-06-11 |
| 메모 추가 | agitd | 2020-06-11 | 2020-06-11 |
| 기기 등록 | agitd | 2020- | 2020- |
| 현재 상태 조회 | agitd | 2020- | 2020- |
| 월별 상태 조회 | agitd | 2020- | 2020- |
| 홈 씨씨티비 | agitd | 2020- | 2020- |

<br><br><br>

## 유스케이스 기술서
회원가입, 로그인, 기기등록, 보호자 가입 승인, 대상 현재 상태 조회, 대상 날짜별 로그 조회, 대상 기본 정보 조회, 
대상 메모 추가, 이상 상황 알림


### 회원가입
* 액터명 : 보호자, DB
* 개요 : 보호자가 모니터링 기기 관리 사이트에 회원가입을 한다.
* 사전조건 :  
* 기본 흐름 :
    1. 회원가입 요청(액터)
    2. 선택에 따라 다른 회원정보 입력 폼을 보여준다.(시스템)
    3. 회원정보에서 항목들을 입력 후 중복 여부 조회한다.(시스템)
        * 아이디
        * 패스워드
        * 이름
        * 전화번호
        * 이메일
        * 기기 번호
     4. 중복여부를 보여준다.(시스템)
     5. 등록 요청한다.(액터)
     6. 보호자 table에 정보 저장한다. flag false.(시스템)
     7. 담당자 승인 후, 이용 가능합니다 메세지 (시스템)
* 대체 흐름 : <br>
     3-1. 입력하지 않은 값이 있다면 오류메세지 출력, 재입력 요청한다.<br>
     4-1. 중복시 오류메세지 출력, 재입력 요청한다.<br>
<br><br>
### 로그인
* 액터명 : 사용자(담당자, 보호자), DB
* 개요 : 사용자가 모니터링 기기 관리 사이트에 로그인 한다.
* 사전조건 : 담당자는 사전에 등록되어 있으며, 보호자는 회원가입이 되어있다.
* 기본 흐름 :
    1. 로그인 요청을 한다.(액터)
    2. 일치하는 아이디 패스워드가 존재하는지 조회한다.(시스템)
    3. 보호자의 경우 flag확인한다.(시스템)
    4. 로그인 성공 후 메인화면을 보여준다. (시스템)
* 대체 흐름 : <br>
    2-1. 일치하는 아이디 패스워드가 없다면 오류메세지 출력, 재입력 요청한다.<br>
    3-1. flag가 false라면 로그인 실패, 승인되지 않았다는 메세지와 담당자 정보를 띄워준다.<br>
<br><br>
### 기기 등록
* 액터명 : 담당자, iot device, DB
* 개요 : 담당자가 본인 담당의 iot device를 웹에 등록한다.
* 사전조건 : 담당자로 로그인이 되어 있어야 한다.
* 기본 흐름 :
    1. 기기 등록을 요청한다.(액터)
    2. 기기에 메세지를 보내고 받은 후 입력 폼을 보여준다.(시스템)
    3. 입력 폼 입력 후 등록을 요청한다.(액터)
        * 대상자 이름
        * 생년월일
        * 연락처
        * 주소
        * 병
    4. device table에 저장한다.(시스템)
    5. 등록 성공 후 메인화면으로 돌아간다.(시스템)
* 대체 흐름 : <br>
    2-1. 기기에서 1분간 메세지 응답이 오지 않으면 재입력 요청한다. <br>
    3-1. 비어있는 폼이 있으면 오류를 출력하고 재입력 요청한다. <br>
<br><br>
### 보호자 가입 승인 
* 액터명 : 담당자, DB
* 개요 : 보호자 가입 신청이 있으면 확인 후 승인을 한다
* 사전조건 : 
* 기본 흐름 :
    1. 가입 승인 페이지에서 승인 요청이 있는지 확인 후 띄워준다. (시스템)
    2. 승인 수락 요청을 한다.(액터)
    3. db반영 후 승인됐다는 메세지를 띄워준다.(시스템)
* 대체 흐름 :<br>
<br><br>
### 대상 현재 상태 조회
* 액터명 : 사용자(보호자, 담당자), iot device
* 개요 : 대상의 현재 집의 온습도, 맥박, 현위치 등을 확인한다.
* 사전조건 :
* 기본 흐름 :
    1. 현재 상태 데이터를 요청한다.(액터)
    2. gps위치의 현재 날씨 데이터를 가져온다.(시스템)
    3. 데이터들을 화면에 출력한다.(시스템)
* 대체 흐름 :<br>
<br><br>
### 대상 월별 상태 조회
* 액터명 : 사용자(보호자, 담당자), iot device, DB
* 개요 : 해당 월의 평균 집의 온습도, 평균 맥박, 평균 걸음 수 등을 현재 정보와 비교하여 보여준다. 해당월의 담당자의 기록을 확인할 수 있다.
* 사전조건 :
* 기본 흐름 :
    1. 현재 상태 데이터를 요청한다.(액터)
    2. gps위치의 현재 날씨 데이터를 가져온다.(시스템)
    3. 데이터들을 화면에 출력한다.(시스템)
* 대체 흐름 :<br>
<br><br>
### 대상 기본 정보 조회
* 액터명 : 사용자(보호자, 담당자), DB
* 개요 : 대상의 이름, 연락처, 주소, 지병, 보호자/담당자 이름, 보호자/담당자 전화번호를 확인 할 수 있다.
* 사전조건 :
* 기본 흐름 :
    1. 대상자의 기본정보를 요청한다.(액터)
    2. 대상자의 기본 정보를 화면에 출력한다. 보호자인지 담당자인지에 따라 서로 각자의 이름과 연락처, 담당자의 메모를 출력한다.(시스템)
* 대체 흐름 :<br>
<br><br>
### 대상 기본 정보 수정
* 액터명 : 담당자, DB
* 개요 : 대상의 이름, 연락처, 주소, 지병, 담당자 이름, 담당자 전화번호를 수정할 수 있다.
* 사전조건 : 액터가 담당자이다.
* 기본 흐름 :
    1. 입력폼과 대상자의 기본정보를 보여준다.(시스템)
    2. 정보 수정 후 업데이트 요청한다.(액터)
    3. DB 업데이트 후 기본 정보 조회 화면으로 돌아간다.(시스템)
* 대체 흐름 :<br>
    2-1. 빈 칸이 있는 경우 오류, 재입력 요청한다.(액터)<br>
<br><br>
### 대상 메모 추가
* 액터명 : 담당자, DB
* 개요 : 메모는 한 달 단위이다. 특이사항 or 다양한 내용 기록해둘 수 있다.
* 사전조건 : 액터가 담당자이다.
* 기본 흐름 :
    1. 이번 달의 메모가 있으면 있는 데이터와 함께 입력 폼을 불러온다. 없다면 폼만 불러온다.(시스템)
    2. 원하는 메모 입력, 수정, 추가 등 하고 입력을 요청한다.(액터)
    3. DB 업데이트 후에 메인화면으로 돌아간다.(시스템)
* 대체 흐름 :<br>
<br><br>
### 홈 씨씨티비 보기
* 액터명 : 사용자(담당자, 보호자), iot device
* 개요 : 집 안의 상황을 확인할 수 있다.
* 사전조건 : 
* 기본 흐름 :
    1. 홈 cctv영상을 요청한다.(액터)
    2. 실시간 홈 cctv영상을 가져와서(어떤 식으로?) 실시간 출력한다.(시스템)
* 대체 흐름 :<br>
<br><br>
### 이상 상황 알림
* 액터명 : 
* 개요 : 
* 사전조건 : 
* 기본 흐름 :
    1. 
    2. 
* 대체 흐름 :<br>
<br><br>

## 환경설정

* JDK 11.0.6
* Eclipse 2019-09
* Tomcat 8.5.55
* maven 3.6.3
* spring tools 3.9.12
* MySQL 8.0.20